@model IEnumerable<WebBanPhuKienDienThoai.Models.Product>
@{
    ViewData["Title"] = "Products";
}

<h2 class="mb-4">Danh Sách Sản Phẩm</h2>

<!-- Thanh tìm kiếm sản phẩm theo giá -->
<div class="mb-4">
    <form method="get" asp-action="Index">
        <div class="input-group">
            <input type="number" name="priceFilter" class="form-control" placeholder="Nhập giá sản phẩm" value="@ViewData["CurrentFilter"]" />
            <button type="submit" class="btn btn-primary">Tìm kiếm</button>
        </div>
    </form>
</div>

<!-- Nút sắp xếp sản phẩm theo giá tăng dần -->
<div class="mb-4">
    <form method="get" asp-action="Index">
        <input type="hidden" name="priceFilter" value="@ViewData["CurrentFilter"]" />
        <input type="hidden" name="sortOrder" value="priceAsc" />
        <button type="submit" class="btn btn-secondary">Sắp xếp theo giá tăng dần</button>
    </form>
</div>

<!-- Nút sắp xếp sản phẩm mới được thêm -->
<div class="mb-4">
    <form method="get" asp-action="Index">
        <input type="hidden" name="priceFilter" value="@ViewData["CurrentFilter"]" />
        <input type="hidden" name="sortOrder" value="newest" />
        <button type="submit" class="btn btn-secondary">Sắp xếp theo sản phẩm mới</button>
    </form>
</div>

<!-- Grid hiển thị sản phẩm -->
<div class="product-grid">
    @foreach (var product in Model)
    {
        <div class="card product-card">
            <img src="@product.ImageUrl" alt="@product.Name" class="product-image" />
            <div class="card-body">
                <h5 class="card-title">@product.Name</h5>
                <p class="card-text">
                    <strong>Price:</strong> @product.Price.ToString("C")<br />
                    <strong>Description:</strong> @product.Description<br />
                    <strong>Category:</strong> @(product.Category?.Name ?? "N/A")<br />
                    <strong>Device available:</strong> @(product.DeviceType?.Name ?? "N/A")
                </p>
                <a class="btn btn-sm btn-info" asp-action="Display" asp-route-id="@product.Id">View</a>
            </div>
        </div>
    }
</div>

<!-- CSS riêng cho grid layout -->
<style>
    .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 250px));
        gap: 20px;
        padding: 20px;
        margin: 0 auto;
        max-width: 1400px;
        justify-content: center;
    }

    .product-card {
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        height: 450px;
    }

    .product-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }

    .card-body {
        padding: 15px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .card-title {
        font-size: 1.1rem;
        margin-bottom: 10px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .card-text {
        font-size: 0.9rem;
        margin-bottom: 10px;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 4;
        -webkit-box-orient: vertical;
    }

    .btn {
        align-self: flex-start;
    }
</style>